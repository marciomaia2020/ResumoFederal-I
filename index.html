<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loteria Federal - An√°lise Estat√≠stica e Palpites</title>
    <script src="https://cdn.tailwindcss.com"></script>
	<link rel="stylesheet" href="../css/styles.css">
	<script src="../js/scripts.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        federal: {
                            '50': '#f9fbfa',
                            '100': '#f0f5f2',
                            '200': '#e0ebe6',
                            '300': '#d1e0d9',
                            '400': '#c2d6cc',
                            '500': '#b3ccbf',
                            '600': '#a3c2b3',
                            '700': '#94b8a6',
                            '800': '#85ad99',
                            '900': '#75a38c'
                        },
                        azul: {
                            '50': '#e5f0f6',
                            '100': '#d9e9f2',
                            '200': '#c6deeb',
                            '300': '#b3d3e5',
                            '400': '#a0c9de',
                            '500': '#8dbed8',
                            '600': '#7ab3d1',
                            '700': '#67a8cb',
                            '800': '#549dc4',
                            '900': '#4192be'
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .loading-circle {
            width: 80px;
            height: 80px;
            background: linear-gradient(45deg, #4192be, #67a8cb, #8dbed8);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        .bilhete-card {
            background: linear-gradient(135deg, #f9fbfa, #e5f0f6);
            border: 2px solid #4192be;
            border-radius: 12px;
            padding: 16px;
            margin: 8px 0;
            animation: fadeIn 0.5s ease-out;
        }
        .numero-bilhete {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            font-size: 18px;
            color: #4192be;
            background: linear-gradient(135deg, #e5f0f6, #d9e9f2);
            padding: 8px 12px;
            border-radius: 8px;
            border: 2px solid #8dbed8;
        }
        .premio-valor {
            background: linear-gradient(45deg, #4192be, #67a8cb);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: bold;
        }
        .estatistica-card {
            background: linear-gradient(to right, #f9fbfa, #e5f0f6);
            border: 2px solid #8dbed8;
            border-radius: 12px;
            padding: 16px;
            margin: 8px 0;
        }
        .digito-freq {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            margin: 2px;
            border: 2px solid #8dbed8;
        }
        .freq-alta { background: linear-gradient(135deg, #4192be, #67a8cb); color: white; }
        .freq-media { background: linear-gradient(135deg, #8dbed8, #a0c9de); color: white; }
        .freq-baixa { background: linear-gradient(135deg, #d9e9f2, #e5f0f6); color: #4192be; }
        .palpite-gerado {
            background: linear-gradient(135deg, #4192be, #67a8cb);
            color: white;
            padding: 12px 20px;
            border-radius: 12px;
            font-family: 'Courier New', monospace;
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            margin: 8px 0;
            border: 3px solid #8dbed8;
        }
        .logo {
            max-height: 80px;
            width: auto;
        }
        @media (max-width: 768px) {
            .numero-bilhete { font-size: 16px; }
            .palpite-gerado { font-size: 18px; }
        }
    </style>
</head>
<body class="bg-federal-50 min-h-screen">
    <div class="container mx-auto px-4 py-6">
        <!-- Header -->
        <div class="text-center mb-6">
            <img src="https://i.postimg.cc/cJnzjFzj/federal.png" alt="Federal Logo" class="logo mx-auto mb-4">
            <h1 class="text-3xl font-bold text-azul-900 mb-2">üé´ LOTERIA FEDERAL</h1>
            <p class="text-gray-600">An√°lise Estat√≠stica Completa e Gera√ß√£o de Palpites Inteligentes</p>
            <div class="flex justify-center gap-4 mt-4 text-sm">
                <span class="bg-azul-100 text-azul-800 px-3 py-1 rounded-full">üìä Dados Reais da API</span>
                <span class="bg-federal-100 text-federal-800 px-3 py-1 rounded-full">üéØ Palpites Inteligentes</span>
                <span class="bg-azul-200 text-azul-900 px-3 py-1 rounded-full">üìà An√°lise Estat√≠stica</span>
            </div>
        </div>

        <!-- Loading -->
        <div id="loading" class="text-center py-8">
            <div class="loading-circle mx-auto mb-4"></div>
            <p class="text-azul-800 font-medium">üîç Carregando dados da Loteria Federal...</p>
        </div>

        <!-- √öltimo Resultado -->
        <div id="ultimoResultado" class="hidden mb-6">
            <div class="bg-white rounded-lg shadow-lg overflow-hidden border-2 border-azul-500">
                <div class="bg-gradient-to-r from-azul-800 to-azul-600 text-white p-4 text-center">
                    <h2 id="tituloResultado" class="text-xl font-bold">Concurso Federal</h2>
                    <div id="dataResultado" class="text-sm">üìÖ Data do sorteio</div>
                </div>
                
                <div class="p-6">
                    <!-- Bilhetes Sorteados -->
                    <div class="mb-6">
                        <h3 class="text-lg font-bold text-azul-800 mb-4">üé´ BILHETES SORTEADOS</h3>
                        <div id="bilhetesSorteados" class="space-y-3">
                            <!-- Bilhetes ser√£o inseridos aqui -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Interface Principal -->
        <div id="interfacePrincipal" class="hidden space-y-6">
            
            <!-- SE√á√ÉO 1: AN√ÅLISE ESTAT√çSTICA -->
            <div class="bg-white rounded-lg shadow-lg p-6 border-2 border-azul-500">
                <h2 class="text-2xl font-bold text-azul-800 mb-6">üìä AN√ÅLISE ESTAT√çSTICA DOS D√çGITOS</h2>

                <!-- Frequ√™ncia dos D√≠gitos -->
                <div class="mb-6">
                    <h3 class="text-lg font-bold text-azul-700 mb-4">üî¢ Frequ√™ncia dos D√≠gitos (0-9)</h3>
                    <div class="estatistica-card">
                        <div class="flex flex-wrap justify-center gap-2" id="frequenciaDigitos">
                            <!-- D√≠gitos com frequ√™ncia ser√£o inseridos aqui -->
                        </div>
                        <div class="text-center mt-4 text-sm text-gray-600">
                            <span class="freq-alta inline-block w-4 h-4 rounded mr-1"></span> Alta Frequ√™ncia
                            <span class="freq-media inline-block w-4 h-4 rounded mx-2 mr-1"></span> M√©dia Frequ√™ncia
                            <span class="freq-baixa inline-block w-4 h-4 rounded mx-2 mr-1"></span> Baixa Frequ√™ncia
                        </div>
                    </div>
                </div>

                <!-- An√°lise de Padr√µes -->
                <div class="mb-6">
                    <h3 class="text-lg font-bold text-azul-700 mb-4">üìà An√°lise de Padr√µes</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="estatistica-card text-center">
                            <div class="text-2xl font-bold text-azul-800" id="totalPares">0</div>
                            <div class="text-sm text-gray-700">D√≠gitos Pares</div>
                        </div>
                        <div class="estatistica-card text-center">
                            <div class="text-2xl font-bold text-azul-800" id="totalImpares">0</div>
                            <div class="text-sm text-gray-700">D√≠gitos √çmpares</div>
                        </div>
                        <div class="estatistica-card text-center">
                            <div class="text-2xl font-bold text-azul-800" id="somaTotal">0</div>
                            <div class="text-sm text-gray-700">Soma dos D√≠gitos</div>
                        </div>
                    </div>
                </div>

                <!-- An√°lise por Posi√ß√£o -->
                <div class="mb-6">
                    <h3 class="text-lg font-bold text-azul-700 mb-4">üéØ An√°lise por Posi√ß√£o do Bilhete</h3>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4" id="analisesPosicao">
                        <!-- An√°lises por posi√ß√£o ser√£o inseridas aqui -->
                    </div>
                </div>
            </div>

            <!-- SE√á√ÉO 2: GERA√á√ÉO DE PALPITES -->
            <div class="bg-white rounded-lg shadow-lg p-6 border-2 border-federal-500">
                <h2 class="text-2xl font-bold text-federal-800 mb-6">üéØ GERA√á√ÉO DE PALPITES INTELIGENTES</h2>

                <!-- Configura√ß√µes -->
                <div class="mb-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="estatistica-card">
                        <h3 class="text-lg font-bold text-federal-700 mb-3">‚öôÔ∏è Configura√ß√µes</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Quantidade de Palpites:</label>
                                <select id="quantidadePalpites" class="w-full px-3 py-2 border border-gray-300 rounded text-base">
                                    <option value="3">3 palpites</option>
                                    <option value="5" selected>5 palpites</option>
                                    <option value="7">7 palpites</option>
                                    <option value="10">10 palpites</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Estrat√©gia:</label>
                                <select id="estrategiaPalpite" class="w-full px-3 py-2 border border-gray-300 rounded text-base">
                                    <option value="frequencia" selected>üìä Baseado em Frequ√™ncia</option>
                                    <option value="equilibrada">‚öñÔ∏è Equilibrada (Pares/√çmpares)</option>
                                    <option value="sequencial">üî¢ Padr√µes Sequenciais</option>
                                    <option value="aleatoria">üé≤ Aleat√≥ria Inteligente</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="estatistica-card">
                        <h3 class="text-lg font-bold text-federal-700 mb-3">üí° Dicas Estat√≠sticas</h3>
                        <div id="dicasEstatisticas" class="text-sm text-gray-700">
                            <!-- Dicas baseadas na an√°lise ser√£o inseridas aqui -->
                        </div>
                    </div>
                </div>

                <!-- Bot√£o de Gera√ß√£o -->
                <div class="text-center mb-6">
                    <button id="gerarPalpites" class="bg-gradient-to-r from-azul-800 to-azul-600 hover:from-azul-900 hover:to-azul-700 text-white font-bold py-4 px-8 rounded-lg text-lg">
                        üéØ Gerar Palpites Inteligentes
                    </button>
                </div>

                <!-- Palpites Gerados -->
                <div id="palpitesGerados" class="hidden">
                    <h3 class="text-lg font-bold text-azul-800 mb-4">üé´ Palpites Gerados</h3>
                    <div id="listaPalpites" class="space-y-3">
                        <!-- Palpites ser√£o inseridos aqui -->
                    </div>
                </div>
            </div>

            <!-- SE√á√ÉO 3: FORMAS DE GANHAR -->
            <div class="bg-white rounded-lg shadow-lg p-6 border-2 border-azul-400">
                <h2 class="text-2xl font-bold text-azul-800 mb-6">üéØ FORMAS DE GANHAR NA FEDERAL</h2>

                <!-- An√°lise do Primeiro Pr√™mio -->
                <div class="mb-6">
                    <h3 class="text-lg font-bold text-azul-700 mb-4">üèÜ An√°lise do 1¬∫ Pr√™mio: <span id="primeiroPremio" class="font-mono text-2xl"></span></h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="formasGanhar">
                        <!-- An√°lises das formas de ganhar ser√£o inseridas aqui -->
                    </div>
                </div>

                <!-- Simulador de Pr√™mios -->
                <div class="mb-6">
                    <h3 class="text-lg font-bold text-azul-700 mb-4">üé≤ Simulador de Pr√™mios</h3>
                    <div class="estatistica-card">
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Digite um bilhete para verificar:</label>
                            <div class="flex gap-2">
                                <input type="text" id="bilheteSimular" placeholder="Ex: 048602" maxlength="6" 
                                       class="flex-1 px-3 py-2 border border-gray-300 rounded text-base font-mono">
                                <button id="simularPremio" class="bg-azul-600 hover:bg-azul-700 text-white px-4 py-2 rounded">
                                    üîç Verificar
                                </button>
                            </div>
                        </div>
                        <div id="resultadoSimulacao" class="hidden bg-azul-50 p-4 rounded border border-azul-200">
                            <!-- Resultado da simula√ß√£o aparecer√° aqui -->
                        </div>
                    </div>
                </div>

                <!-- Probabilidades -->
                <div class="mb-6">
                    <h3 class="text-lg font-bold text-azul-700 mb-4">üìä Probabilidades por Extra√ß√£o</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="estatistica-card">
                            <h4 class="font-bold text-azul-800 mb-2">Extra√ß√µes Regulares</h4>
                            <div class="space-y-1 text-sm">
                                <div>üóìÔ∏è <strong>QUARTOU:</strong> 1 em 92.000</div>
                                <div>üóìÔ∏è <strong>S√°bado:</strong> 1 em 96.000</div>
                                <div>üí∞ <strong>Bilhete:</strong> R$ 40,00 (10 fra√ß√µes de R$ 4,00)</div>
                            </div>
                        </div>
                        <div class="estatistica-card">
                            <h4 class="font-bold text-azul-800 mb-2">Extra√ß√µes Especiais</h4>
                            <div class="space-y-1 text-sm">
                                <div>üéØ <strong>Milion√°ria Federal:</strong> 1 em 84.000</div>
                                <div>üéÑ <strong>Especial de Natal:</strong> 1 em 85.000</div>
                                <div>üí∞ <strong>Bilhete:</strong> R$ 100,00 (10 fra√ß√µes de R$ 10,00)</div>
                            </div>
                        </div>
                    </div>
                    <div class="estatistica-card text-center mt-4">
                        <div class="text-lg font-bold text-azul-800">üéä Chance Geral de Premia√ß√£o</div>
                        <div class="text-2xl font-bold text-azul-600">1 em 4,78</div>
                        <div class="text-sm text-gray-600">Considerando todos os pr√™mios derivados</div>
                    </div>
                </div>
            </div>

            <!-- SE√á√ÉO 4: MEUS PALPITES -->
            <div class="bg-white rounded-lg shadow-lg p-6 border-2 border-federal-500">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-federal-800">üìã MEUS PALPITES</h2>
                    <button id="limparPalpites" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg">
                        üóëÔ∏è Limpar
                    </button>
                </div>

                <!-- Lista dos Palpites Salvos -->
                <div class="bg-federal-50 rounded-lg p-4 max-h-96 overflow-y-auto">
                    <div id="listaPalpitesSalvos">
                        <p class="text-gray-500 text-center py-8">Nenhum palpite salvo ainda</p>
                    </div>
                </div>

                <!-- Bot√µes de Download -->
                <div class="grid grid-cols-2 gap-2 mt-4">
                    <button id="downloadTXT" class="bg-azul-500 hover:bg-azul-600 text-white px-3 py-2 rounded-lg text-sm">
                        üìÑ Baixar TXT
                    </button>
                    <button id="downloadHTML" class="bg-federal-500 hover:bg-federal-600 text-white px-3 py-2 rounded-lg text-sm">
                        üåê Baixar HTML
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // üé´ CONFIGURA√á√ïES E DADOS DA FEDERAL
        let dadosFederal = null;
        let palpitesSalvos = [];
        let estatisticas = {
            frequenciaDigitos: {},
            padroesPosicao: {},
            tendencias: {}
        };

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                await carregarDadosFederal();
            } catch (error) {
                console.log('Erro ao carregar dados:', error);
                usarDadosExemplo();
            }
            
            inicializarInterface();
            configurarEventListeners();
        });

        async function carregarDadosFederal() {
            try {
                const response = await fetch('https://servicebus2.caixa.gov.br/portaldeloterias/api/federal');
                if (response.ok) {
                    const data = await response.json();
                    if (data && data.numero) {
                        dadosFederal = data;
                        exibirUltimoResultado(data);
                        analisarEstatisticas(data);
                        finalizarCarregamento();
                        return;
                    }
                }
                throw new Error('API indispon√≠vel');
            } catch (error) {
                throw error;
            }
        }

        function usarDadosExemplo() {
            dadosFederal = {
                numero: 6000,
                dataApuracao: "13/09/2025",
                listaDezenas: ["048602", "001927", "082187", "034246", "068744"],
                listaRateioPremio: [
                    { faixa: 1, valorPremio: 500000.0, numeroDeGanhadores: 1 },
                    { faixa: 2, valorPremio: 35000.0, numeroDeGanhadores: 1 },
                    { faixa: 3, valorPremio: 30000.0, numeroDeGanhadores: 1 },
                    { faixa: 4, valorPremio: 25000.0, numeroDeGanhadores: 1 },
                    { faixa: 5, valorPremio: 20503.0, numeroDeGanhadores: 1 }
                ],
                listaMunicipioUFGanhadores: [
                    { posicao: 1, municipio: "CURITIBA", uf: "PR", nomeFatansiaUL: "LOTERICA MERCADO MUNICIPAL" },
                    { posicao: 2, municipio: "BALSAMO", uf: "SP", nomeFatansiaUL: "CAIAQUE LOTERIAS" },
                    { posicao: 3, municipio: "CAMPO GRANDE", uf: "MS", nomeFatansiaUL: "LOTERICA PE QUENTE" },
                    { posicao: 4, municipio: "RIBEIRAO PRETO", uf: "SP", nomeFatansiaUL: "LOTERICA GALERIA" },
                    { posicao: 5, municipio: "LAGES", uf: "SC", nomeFatansiaUL: "LOTERICA TERMINAL" }
                ]
            };
            exibirUltimoResultado(dadosFederal);
            analisarEstatisticas(dadosFederal);
            finalizarCarregamento();
        }

        function finalizarCarregamento() {
            document.getElementById('loading').classList.add('hidden');
            document.getElementById('ultimoResultado').classList.remove('hidden');
            document.getElementById('interfacePrincipal').classList.remove('hidden');
            
            // Carregar an√°lise das formas de ganhar
            carregarFormasGanhar();
        }

        function exibirUltimoResultado(data) {
            document.getElementById('tituloResultado').textContent = `Concurso ${data.numero}`;
            document.getElementById('dataResultado').textContent = `üìÖ ${data.dataApuracao}`;

            // Exibir bilhetes sorteados
            const bilhetesDiv = document.getElementById('bilhetesSorteados');
            bilhetesDiv.innerHTML = '';
            
            data.listaDezenas.forEach((bilhete, index) => {
                const premio = data.listaRateioPremio[index];
                const bilheteDiv = document.createElement('div');
                bilheteDiv.className = 'bilhete-card';
                
                bilheteDiv.innerHTML = `
                    <div class="flex justify-between items-center">
                        <div>
                            <div class="text-sm font-medium text-gray-600">${index + 1}¬∫ Pr√™mio</div>
                            <div class="numero-bilhete">${bilhete}</div>
                        </div>
                        <div class="text-right">
                            <div class="premio-valor">${formatarMoeda(premio.valorPremio)}</div>
                            <div class="text-xs text-gray-600 mt-1">${premio.numeroDeGanhadores} ganhador(es)</div>
                        </div>
                    </div>
                `;
                
                bilhetesDiv.appendChild(bilheteDiv);
            });
        }

        function analisarEstatisticas(data) {
            // Resetar estat√≠sticas
            estatisticas.frequenciaDigitos = {};
            estatisticas.padroesPosicao = {};
            
            // Inicializar contadores
            for (let i = 0; i <= 9; i++) {
                estatisticas.frequenciaDigitos[i] = 0;
            }

            let totalPares = 0;
            let totalImpares = 0;
            let somaTotal = 0;

            // Analisar cada bilhete
            data.listaDezenas.forEach(bilhete => {
                for (let i = 0; i < bilhete.length; i++) {
                    const digito = parseInt(bilhete[i]);
                    estatisticas.frequenciaDigitos[digito]++;
                    
                    if (digito % 2 === 0) {
                        totalPares++;
                    } else {
                        totalImpares++;
                    }
                    
                    somaTotal += digito;
                }
            });

            // Atualizar interface com estat√≠sticas
            atualizarFrequenciaDigitos();
            atualizarPadroesGerais(totalPares, totalImpares, somaTotal);
            atualizarAnalisesPosicao();
            gerarDicasEstatisticas();
        }

        function atualizarFrequenciaDigitos() {
            const container = document.getElementById('frequenciaDigitos');
            container.innerHTML = '';

            const maxFreq = Math.max(...Object.values(estatisticas.frequenciaDigitos));
            const minFreq = Math.min(...Object.values(estatisticas.frequenciaDigitos));

            for (let digito = 0; digito <= 9; digito++) {
                const freq = estatisticas.frequenciaDigitos[digito];
                const div = document.createElement('div');
                div.className = 'digito-freq';
                div.textContent = digito;

                // Classificar frequ√™ncia
                if (freq === maxFreq) {
                    div.classList.add('freq-alta');
                } else if (freq === minFreq) {
                    div.classList.add('freq-baixa');
                } else {
                    div.classList.add('freq-media');
                }

                div.title = `D√≠gito ${digito}: ${freq} vezes`;
                container.appendChild(div);
            }
        }

        function atualizarPadroesGerais(pares, impares, soma) {
            document.getElementById('totalPares').textContent = pares;
            document.getElementById('totalImpares').textContent = impares;
            document.getElementById('somaTotal').textContent = soma;
        }

        function atualizarAnalisesPosicao() {
            const container = document.getElementById('analisesPosicao');
            container.innerHTML = '';

            for (let pos = 0; pos < 6; pos++) {
                const div = document.createElement('div');
                div.className = 'estatistica-card text-center';
                
                // Analisar d√≠gitos nesta posi√ß√£o
                const digitosNaPosicao = dadosFederal.listaDezenas.map(bilhete => parseInt(bilhete[pos]));
                const maioresNaPosicao = digitosNaPosicao.filter(d => d >= 5).length;
                const menoresNaPosicao = digitosNaPosicao.filter(d => d < 5).length;

                div.innerHTML = `
                    <div class="text-lg font-bold text-azul-800">${pos + 1}¬™ Posi√ß√£o</div>
                    <div class="text-sm text-gray-600">Maiores (5-9): ${maioresNaPosicao}</div>
                    <div class="text-sm text-gray-600">Menores (0-4): ${menoresNaPosicao}</div>
                `;
                
                container.appendChild(div);
            }
        }

        function gerarDicasEstatisticas() {
            const container = document.getElementById('dicasEstatisticas');
            const maxDigito = Object.keys(estatisticas.frequenciaDigitos).reduce((a, b) => 
                estatisticas.frequenciaDigitos[a] > estatisticas.frequenciaDigitos[b] ? a : b
            );
            const minDigito = Object.keys(estatisticas.frequenciaDigitos).reduce((a, b) => 
                estatisticas.frequenciaDigitos[a] < estatisticas.frequenciaDigitos[b] ? a : b
            );

            container.innerHTML = `
                <div class="space-y-2">
                    <div>üî• <strong>D√≠gito mais frequente:</strong> ${maxDigito} (${estatisticas.frequenciaDigitos[maxDigito]} vezes)</div>
                    <div>‚ùÑÔ∏è <strong>D√≠gito menos frequente:</strong> ${minDigito} (${estatisticas.frequenciaDigitos[minDigito]} vezes)</div>
                    <div>üìä <strong>Tend√™ncia:</strong> ${analisarTendencia()}</div>
                    <div>üí° <strong>Sugest√£o:</strong> ${gerarSugestao()}</div>
                </div>
            `;
        }

        function analisarTendencia() {
            const totalPares = document.getElementById('totalPares').textContent;
            const totalImpares = document.getElementById('totalImpares').textContent;
            
            if (totalPares > totalImpares) {
                return 'N√∫meros pares est√£o mais frequentes';
            } else if (totalImpares > totalPares) {
                return 'N√∫meros √≠mpares est√£o mais frequentes';
            } else {
                return 'Equil√≠brio entre pares e √≠mpares';
            }
        }

        function gerarSugestao() {
            const sugestoes = [
                'Considere usar d√≠gitos de frequ√™ncia m√©dia',
                'Varie entre d√≠gitos altos e baixos',
                'Mantenha equil√≠brio entre pares e √≠mpares',
                'Observe padr√µes das primeiras posi√ß√µes',
                'Evite sequ√™ncias muito √≥bvias'
            ];
            return sugestoes[Math.floor(Math.random() * sugestoes.length)];
        }

        function gerarPalpites() {
            const quantidade = parseInt(document.getElementById('quantidadePalpites').value);
            const estrategia = document.getElementById('estrategiaPalpite').value;
            
            const palpites = [];
            
            for (let i = 0; i < quantidade; i++) {
                let palpite;
                
                switch (estrategia) {
                    case 'frequencia':
                        palpite = gerarPalpiteBaseadoFrequencia();
                        break;
                    case 'equilibrada':
                        palpite = gerarPalpiteEquilibrado();
                        break;
                    case 'sequencial':
                        palpite = gerarPalpiteSequencial();
                        break;
                    default:
                        palpite = gerarPalpiteAleatorio();
                }
                
                palpites.push(palpite);
            }
            
            exibirPalpites(palpites);
        }

        function gerarPalpiteBaseadoFrequencia() {
            let palpite = '';
            const digitosOrdenados = Object.keys(estatisticas.frequenciaDigitos)
                .sort((a, b) => estatisticas.frequenciaDigitos[b] - estatisticas.frequenciaDigitos[a]);

            for (let i = 0; i < 6; i++) {
                if (Math.random() < 0.7) {
                    // 70% de chance de usar d√≠gitos mais frequentes
                    palpite += digitosOrdenados[Math.floor(Math.random() * 5)];
                } else {
                    // 30% de chance de usar qualquer d√≠gito
                    palpite += Math.floor(Math.random() * 10);
                }
            }
            
            return palpite;
        }

        function gerarPalpiteEquilibrado() {
            let palpite = '';
            let pares = 0;
            let impares = 0;
            
            for (let i = 0; i < 6; i++) {
                let digito;
                
                if (pares < 3 && impares < 3) {
                    digito = Math.floor(Math.random() * 10);
                } else if (pares >= 3) {
                    // For√ßa √≠mpar
                    digito = [1, 3, 5, 7, 9][Math.floor(Math.random() * 5)];
                } else {
                    // For√ßa par
                    digito = [0, 2, 4, 6, 8][Math.floor(Math.random() * 5)];
                }
                
                if (digito % 2 === 0) pares++;
                else impares++;
                
                palpite += digito;
            }
            
            return palpite;
        }

        function gerarPalpiteSequencial() {
            let palpite = '';
            const base = Math.floor(Math.random() * 7); // 0-6
            
            for (let i = 0; i < 6; i++) {
                const digito = (base + i) % 10;
                palpite += digito;
            }
            
            return palpite;
        }

        function gerarPalpiteAleatorio() {
            let palpite = '';
            for (let i = 0; i < 6; i++) {
                palpite += Math.floor(Math.random() * 10);
            }
            return palpite;
        }

        function exibirPalpites(palpites) {
            const container = document.getElementById('listaPalpites');
            container.innerHTML = '';
            
            palpites.forEach((palpite, index) => {
                const div = document.createElement('div');
                div.className = 'palpite-gerado';
                div.innerHTML = `
                    <div class="flex justify-between items-center">
                        <span>Palpite ${index + 1}: ${palpite}</span>
                        <button onclick="salvarPalpite('${palpite}')" class="bg-white text-azul-800 px-3 py-1 rounded text-sm font-normal hover:bg-gray-100">
                            üíæ Salvar
                        </button>
                    </div>
                `;
                container.appendChild(div);
            });
            
            document.getElementById('palpitesGerados').classList.remove('hidden');
        }

        function salvarPalpite(palpite) {
            if (!palpitesSalvos.includes(palpite)) {
                palpitesSalvos.push(palpite);
                atualizarListaPalpitesSalvos();
                showCustomAlert('‚úÖ Sucesso', `Palpite ${palpite} salvo!`);
            } else {
                showCustomAlert('‚ö†Ô∏è Aviso', 'Este palpite j√° foi salvo!');
            }
        }

        function atualizarListaPalpitesSalvos() {
            const container = document.getElementById('listaPalpitesSalvos');
            
            if (palpitesSalvos.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">Nenhum palpite salvo ainda</p>';
                return;
            }
            
            container.innerHTML = '';
            palpitesSalvos.forEach((palpite, index) => {
                const div = document.createElement('div');
                div.className = 'bilhete-card flex justify-between items-center';
                div.innerHTML = `
                    <div>
                        <div class="text-sm text-gray-600">Palpite ${index + 1}</div>
                        <div class="numero-bilhete">${palpite}</div>
                    </div>
                    <button onclick="removerPalpite(${index})" class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-xs">
                        üóëÔ∏è
                    </button>
                `;
                container.appendChild(div);
            });
        }

        function removerPalpite(index) {
            palpitesSalvos.splice(index, 1);
            atualizarListaPalpitesSalvos();
        }

        function limparPalpites() {
            showCustomConfirm('Tem certeza que deseja limpar todos os palpites?', () => {
                palpitesSalvos = [];
                atualizarListaPalpitesSalvos();
            });
        }

        function downloadTXT() {
            if (palpitesSalvos.length === 0) {
                showCustomAlert('‚ö†Ô∏è Sem Palpites', 'Salve alguns palpites primeiro!');
                return;
            }
            
            let txt = 'LOTERIA FEDERAL - PALPITES\n\n';
            palpitesSalvos.forEach((palpite, index) => {
                txt += `Palpite ${index + 1}: ${palpite}\n`;
            });
            
            baixarArquivo(txt, 'federal-palpites.txt', 'text/plain');
        }

        function downloadHTML() {
            if (palpitesSalvos.length === 0) {
                showCustomAlert('‚ö†Ô∏è Sem Palpites', 'Salve alguns palpites primeiro!');
                return;
            }
            
            const data = new Date().toLocaleDateString('pt-BR');
            let html = `<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Federal - Meus Palpites</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f9fbfa; }
        .header { text-align: center; margin-bottom: 30px; color: #4192be; }
        .palpite { margin: 10px 0; padding: 15px; background: white; border: 2px solid #4192be; border-radius: 8px; }
        .numero { font-family: 'Courier New', monospace; font-size: 20px; font-weight: bold; color: #4192be; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üé´ LOTERIA FEDERAL - MEUS PALPITES</h1>
        <p>Gerado em: ${data}</p>
    </div>`;
            
            palpitesSalvos.forEach((palpite, index) => {
                html += `
    <div class="palpite">
        <h3>Palpite ${index + 1}</h3>
        <div class="numero">${palpite}</div>
    </div>`;
            });
            
            html += '</body></html>';
            baixarArquivo(html, 'federal-palpites.html', 'text/html');
        }

        function baixarArquivo(conteudo, nomeArquivo, tipoMime) {
            const blob = new Blob([conteudo], { type: tipoMime });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = nomeArquivo;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        function formatarMoeda(valor) {
            return new Intl.NumberFormat('pt-BR', {
                style: 'currency',
                currency: 'BRL'
            }).format(valor);
        }

        // Modais customizados
        function showCustomAlert(titulo, mensagem) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white p-6 rounded-lg shadow-lg max-w-sm w-full mx-4">
                    <h3 class="font-bold text-azul-800 mb-2">${titulo}</h3>
                    <p class="text-gray-700 mb-4">${mensagem}</p>
                    <div class="flex justify-end">
                        <button class="px-4 py-2 bg-azul-500 text-white hover:bg-azul-600 rounded" onclick="this.closest('.fixed').remove()">OK</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function showCustomConfirm(message, onConfirm) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            
            const modalContent = document.createElement('div');
            modalContent.className = 'bg-white p-6 rounded-lg shadow-lg max-w-sm w-full mx-4';
            
            const messageEl = document.createElement('p');
            messageEl.className = 'text-gray-700 mb-4';
            messageEl.textContent = message;
            
            const buttonsDiv = document.createElement('div');
            buttonsDiv.className = 'flex justify-end space-x-3';
            
            const cancelBtn = document.createElement('button');
            cancelBtn.className = 'px-4 py-2 text-gray-600 hover:bg-gray-100 rounded';
            cancelBtn.textContent = 'Cancelar';
            cancelBtn.onclick = () => modal.remove();
            
            const confirmBtn = document.createElement('button');
            confirmBtn.className = 'px-4 py-2 bg-red-500 text-white hover:bg-red-600 rounded';
            confirmBtn.textContent = 'Confirmar';
            confirmBtn.onclick = () => {
                modal.remove();
                onConfirm();
            };
            
            buttonsDiv.appendChild(cancelBtn);
            buttonsDiv.appendChild(confirmBtn);
            modalContent.appendChild(messageEl);
            modalContent.appendChild(buttonsDiv);
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
        }

        function inicializarInterface() {
            // Interface j√° inicializada com dados
        }

        function carregarFormasGanhar() {
            const primeiroPremio = dadosFederal.listaDezenas[0];
            document.getElementById('primeiroPremio').textContent = primeiroPremio;
            
            const container = document.getElementById('formasGanhar');
            container.innerHTML = '';
            
            // An√°lise das formas de ganhar
            const formas = [
                {
                    titulo: 'üèÜ Bilhete Completo',
                    descricao: `Acertar: ${primeiroPremio}`,
                    chance: 'Pr√™mio M√°ximo'
                },
                {
                    titulo: 'üéØ Milhar',
                    descricao: `Terminar com: ${primeiroPremio.slice(-4)}`,
                    chance: 'Boa chance'
                },
                {
                    titulo: 'üíØ Centena',
                    descricao: `Terminar com: ${primeiroPremio.slice(-3)}`,
                    chance: 'Chance m√©dia'
                },
                {
                    titulo: 'üîü Dezena',
                    descricao: `Terminar com: ${primeiroPremio.slice(-2)}`,
                    chance: 'Alta chance'
                },
                {
                    titulo: 'üìç Aproxima√ß√µes',
                    descricao: `${parseInt(primeiroPremio) - 1} ou ${parseInt(primeiroPremio) + 1}`,
                    chance: 'Boa chance'
                },
                {
                    titulo: '1Ô∏è‚É£ Unidade',
                    descricao: `Terminar com: ${primeiroPremio.slice(-1)}`,
                    chance: 'Alt√≠ssima chance'
                }
            ];
            
            formas.forEach(forma => {
                const div = document.createElement('div');
                div.className = 'estatistica-card text-center';
                div.innerHTML = `
                    <div class="text-lg font-bold text-azul-800 mb-2">${forma.titulo}</div>
                    <div class="text-sm text-gray-700 mb-2">${forma.descricao}</div>
                    <div class="text-xs text-azul-600 font-medium">${forma.chance}</div>
                `;
                container.appendChild(div);
            });
        }

        function simularPremio() {
            const bilhete = document.getElementById('bilheteSimular').value.trim();
            const resultadoDiv = document.getElementById('resultadoSimulacao');
            
            if (!bilhete || bilhete.length !== 6) {
                showCustomAlert('‚ö†Ô∏è Erro', 'Digite um bilhete v√°lido de 6 d√≠gitos!');
                return;
            }
            
            const primeiroPremio = dadosFederal.listaDezenas[0];
            const premios = [];
            
            // Verificar pr√™mios principais
            dadosFederal.listaDezenas.forEach((bilhetePremio, index) => {
                if (bilhete === bilhetePremio) {
                    premios.push({
                        tipo: `${index + 1}¬∫ Pr√™mio Principal`,
                        valor: dadosFederal.listaRateioPremio[index].valorPremio,
                        cor: 'text-green-600'
                    });
                }
            });
            
            // Verificar milhar
            dadosFederal.listaDezenas.forEach(bilhetePremio => {
                if (bilhete.slice(-4) === bilhetePremio.slice(-4) && bilhete !== bilhetePremio) {
                    premios.push({
                        tipo: 'Milhar',
                        valor: 'Pr√™mio vari√°vel',
                        cor: 'text-blue-600'
                    });
                }
            });
            
            // Verificar centena
            dadosFederal.listaDezenas.forEach(bilhetePremio => {
                if (bilhete.slice(-3) === bilhetePremio.slice(-3) && bilhete.slice(-4) !== bilhetePremio.slice(-4)) {
                    premios.push({
                        tipo: 'Centena',
                        valor: 'Pr√™mio vari√°vel',
                        cor: 'text-blue-600'
                    });
                }
            });
            
            // Verificar dezena
            dadosFederal.listaDezenas.forEach(bilhetePremio => {
                if (bilhete.slice(-2) === bilhetePremio.slice(-2) && bilhete.slice(-3) !== bilhetePremio.slice(-3)) {
                    premios.push({
                        tipo: 'Dezena',
                        valor: 'Pr√™mio vari√°vel',
                        cor: 'text-blue-600'
                    });
                }
            });
            
            // Verificar aproxima√ß√µes do 1¬∫ pr√™mio
            const numBilhete = parseInt(bilhete);
            const numPrimeiro = parseInt(primeiroPremio);
            if (numBilhete === numPrimeiro - 1 || numBilhete === numPrimeiro + 1) {
                premios.push({
                    tipo: 'Aproxima√ß√£o do 1¬∫ Pr√™mio',
                    valor: 'Pr√™mio fixo',
                    cor: 'text-purple-600'
                });
            }
            
            // Verificar unidade do 1¬∫ pr√™mio
            if (bilhete.slice(-1) === primeiroPremio.slice(-1) && premios.length === 0) {
                premios.push({
                    tipo: 'Unidade do 1¬∫ Pr√™mio',
                    valor: 'Pr√™mio fixo',
                    cor: 'text-orange-600'
                });
            }
            
            // Exibir resultado
            if (premios.length === 0) {
                resultadoDiv.innerHTML = `
                    <div class="text-center">
                        <div class="text-2xl mb-2">üòû</div>
                        <div class="font-bold text-gray-700">N√£o foi dessa vez!</div>
                        <div class="text-sm text-gray-600">Este bilhete n√£o foi premiado neste sorteio.</div>
                    </div>
                `;
            } else {
                let html = `
                    <div class="text-center mb-4">
                        <div class="text-2xl mb-2">üéâ</div>
                        <div class="font-bold text-green-700">PARAB√âNS! Voc√™ foi premiado!</div>
                    </div>
                    <div class="space-y-2">
                `;
                
                premios.forEach(premio => {
                    html += `
                        <div class="flex justify-between items-center p-2 bg-white rounded border">
                            <span class="font-medium ${premio.cor}">${premio.tipo}</span>
                            <span class="text-sm text-gray-600">${typeof premio.valor === 'number' ? formatarMoeda(premio.valor) : premio.valor}</span>
                        </div>
                    `;
                });
                
                html += '</div>';
                resultadoDiv.innerHTML = html;
            }
            
            resultadoDiv.classList.remove('hidden');
        }

        function configurarEventListeners() {
            document.getElementById('gerarPalpites').addEventListener('click', gerarPalpites);
            document.getElementById('limparPalpites').addEventListener('click', limparPalpites);
            document.getElementById('downloadTXT').addEventListener('click', downloadTXT);
            document.getElementById('downloadHTML').addEventListener('click', downloadHTML);
            document.getElementById('simularPremio').addEventListener('click', simularPremio);
            
            // Permitir simula√ß√£o com Enter
            document.getElementById('bilheteSimular').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    simularPremio();
                }
            });
            
            // Formatar input do bilhete
            document.getElementById('bilheteSimular').addEventListener('input', function(e) {
                let valor = e.target.value.replace(/\D/g, '');
                if (valor.length > 6) valor = valor.slice(0, 6);
                e.target.value = valor;
            });
        }
    </script>
</body>
</html>